# roguelike
### 1. **Общие сведения о системе**

Roguelike — это консольная игра , в которой игрок управляет персонажем, исследующим процедурно сгенерированные подземелья. Цель игры — пройти как можно дальше, собирая ценные предметы и улучшая характеристики персонажа. Игра отличается сложностью и перманентной смертью персонажа, что подталкивает игрока пробовать разные стратегии и пути развития.

- **Жанр игры**: Roguelike с традиционной консольной графикой.
- **Цель игрока**: Исследовать подземелья, собирать предметы, улучшать персонажа, сражаться с врагами.
- **Технические ограничения**: Работа в консольном режиме без графического интерфейса.
- **Целевая платформа**: Кроссплатформенная (Windows, macOS, Linux).

---

### 2. **Определяющие факторы архитектуры (Architectural Drivers)**

- **Производительность**: Обеспечение быстрого отклика на действия игрока и плавной работы игры.
- **Расширяемость**: Возможность добавления новых уровней, врагов, предметов и игровых механик без значительных изменений архитектуры.
- **Модульность**: Разделение системы на независимые компоненты для облегчения разработки и тестирования.
- **Юзабилити**: Интуитивное управление персонажем с клавиатуры, понятный интерфейс.
- **Надежность**: Обработка ошибок и предотвращение сбоев, особенно в критических ситуациях (например, при сохранении игры).
- **Кроссплатформенность**: Поддержка основных операционных систем без изменений в коде.

---

### 3. **Роли и случаи использования**

#### Роли:

1. **Игрок**:
    
    - Управляет персонажем при помощи клавиатуры.
    - Взаимодействует с игровым миром и объектами.
    - Управляет инвентарем и снаряжением персонажа.
2. **Разработчик/Дизайнер уровней**:
    
    - Создает уникальные уровни и сценарии.
    - Настраивает параметры генерации карт.
    - Добавляет новые объекты, врагов и предметы.

#### Случаи использования:

- **UC1: Перемещение персонажа**
    
    - Игрок использует клавиши управления для перемещения по карте.
- **UC2: Взаимодействие с объектами**
    
    - Игрок подбирает предметы, открывает двери, активирует механизмы.
- **UC3: Управление инвентарем**
    
    - Игрок открывает инвентарь, просматривает предметы, надевает и снимает снаряжение.
- **UC4: Сражение с врагами**
    
    - Игрок атакует врагов, использует навыки и предметы для победы.
- **UC5: Генерация или загрузка карты**
    
    - Игра генерирует новый уровень или загружает его из файла при запуске или переходе на новый уровень.
- **UC6: Перманентная смерть**
    
    - При гибели персонажа игра завершается без возможности загрузить сохранение.

---

### 4. **Описание типичного пользователя**

- **Возраст**: 16–35 лет.
- **Опыт**: Знаком с компьютерными играми, особенно с жанром roguelike или ролевыми играми.
- **Интересы**: Любит сложные и глубокие игры с высокой степенью реиграбельности.
- **Мотивация**: Исследование неизвестного, преодоление сложностей, улучшение навыков и стратегий.

---

### 5. **Композиция системы**

#### Диаграмма компонентов:

```
+--------------------+
|    Input Handler   |<-----------------+
+--------------------+                  |
           |                            |
           v                            |
+--------------------+       +--------------------+
|    Game Engine     |<----->|  Inventory Manager |
+--------------------+       +--------------------+
           |                            ^
           v                            |
+--------------------+       +--------------------+
|   Map Generator    |------>|    Item Database   |
+--------------------+       +--------------------+
           |
           v
+--------------------+
|  Graphics Renderer |
+--------------------+
```

**Описание компонентов:**

- **Input Handler**: Обрабатывает ввод с клавиатуры, преобразует его в команды для игрового движка.
- **Game Engine**: Основной модуль, управляющий логикой игры, состояниями объектов и взаимодействиями между ними.
- **Map Generator**: Отвечает за создание карт уровней — процедурная генерация или загрузка из файлов.
- **Graphics Renderer**: Отображает текущее состояние игры в консоли, включая карту, персонажа, врагов и интерфейс.
- **Inventory Manager**: Управляет инвентарем игрока, обеспечивает возможности добавления, удаления и использования предметов.
- **Item Database**: Хранит информацию обо всех возможных предметах в игре для доступа Inventory Manager и Game Engine.

---

### 6. **Логическая структура**

#### Диаграмма классов:

```
+--------------------+
|       Game         |
+--------------------+
| - player           |
| - currentMap       |
| - isRunning        |
+--------------------+
| + start()          |
| + update()         |
| + render()         |
+--------------------+
           |
           v
+--------------------+          +--------------------+
|      Player        |          |      Map           |
+--------------------+          +--------------------+
| - health           |          | - tiles            |
| - attackPower      |          | - items            |
| - inventory        |          | - enemies          |
| - position         |          | - width            |
+--------------------+          | - height           |
| + move()           |          +--------------------+
| + attack()         |          | + generate()       |
| + pickUpItem()     |          | + loadFromFile()   |
| + useItem()        |          | + getTileAt(x,y)   |
+--------------------+          +--------------------+
           |
           v
+--------------------+
|     Inventory      |
+--------------------+
| - items            |
+--------------------+
| + addItem(item)    |
| + removeItem(item) |
| + equipItem(item)  |
| + unequipItem(item)|
+--------------------+
```

**Описание основных классов:**

- **Game**: Управляет основным игровым циклом, обновлением состояния и отрисовкой.
- **Player**: Представляет игрового персонажа с его свойствами и действиями.
- **Inventory**: Хранит предметы игрока и предоставляет методы для управления ими.
- **Map**: Представляет текущую карту уровня, включая тайлы, предметы и врагов.

---

### 7. **Взаимодействия и состояния**

#### Диаграмма последовательностей

**Сценарий: Игрок надевает предмет из инвентаря.**

```
Игрок               InputHandler           GameEngine           InventoryManager        Item
  |                       |                      |                     |                 |
  | ---нажимает клавишу e-|                      |                     |                 |
  |---------------------->|                      |                     |                 |
  |                       |-----команда equip--->|                     |                 |
  |                       |                      |--equipItem(item)->  |                 |
  |                       |                      |-------------------->|                 |
  |                       |                      |                     |--applyEffect--> |
  |                       |                      |                     |---------------->|
  |                       |                      |                     |                 |
  |                       |                      |<--item equipped-----|                 |
  |                       |<-----подтверждение----|                     |                 |
  |<----отображение-------|                      |                     |                 |
```

#### Диаграмма состояний

**Состояния персонажа:**

1. **Idle (Ожидание)**: Персонаж стоит на месте, ожидая ввода от игрока.
2. **Moving (Движение)**: Персонаж перемещается на другую клетку.
3. **Attacking (Атака)**: Персонаж атакует врага.
4. **Interacting (Взаимодействие)**: Персонаж взаимодействует с объектом (подбирает предмет, открывает дверь).
5. **Managing Inventory (Управление инвентарем)**: Персонаж просматривает или изменяет инвентарь.
6. **Dead (Смерть)**: Персонаж погиб, игра заканчивается.

**Переходы между состояниями:**

- **Idle → Moving**: При вводе команды движения.
- **Idle → Attacking**: При вводе команды атаки или при движении в клетку с врагом.
- **Idle → Interacting**: При вводе команды взаимодействия.
- **Idle → Managing Inventory**: При вводе команды открытия инвентаря.
- **Любое состояние → Dead**: Если здоровье персонажа падает до нуля.
- **Managing Inventory → Idle**: При выходе из инвентаря.

---

### **Распределение задач в команде**

- **Участник 1**: Разработка **Генератора карт (Map Generator)**, включая алгоритмы процедурной генерации и загрузки карт из файлов.
- **Участник 2**: Разработка **Игрового движка (Game Engine)** и системы **Обработки ввода (Input Handler)**, управление игровым циклом и логикой.
- **Участник 3**: Разработка **Отрисовщика (Graphics Renderer)** для вывода состояния игры в консоль и **Менеджера инвентаря (Inventory Manager)**, включая управление предметами и их влиянием на персонажа.

---

**Примечание к разработке:**

- Обратить особое внимание на модульность системы для обеспечения легкой расширяемости.
- Уделить время на документирование кода и создание понятных интерфейсов между компонентами.
- Использовать принципы объектно-ориентированного программирования для создания гибкой и поддерживаемой архитектуры.
- Предусмотреть обработку ошибок и исключительных ситуаций (например, попытка перемещения в непроходимую клетку).
